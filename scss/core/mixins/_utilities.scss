@use 'sass:map';
@use '../variables' as *;

/**
 * Kat UI Framework - ユーティリティミックスイン
 * 
 * 汎用的なユーティリティミックスイン群
 * 
 * @project: Kat UI Framework
 * @author: Bui Van Tai, 2024-12-15
 * @version: 1.0.0
 */

/* フォーカススタイルミックスイン */
@mixin kat-focus-ring {
  outline: 2px solid transparent;
  outline-offset: 2px;
  
  &:focus-visible {
    box-shadow: $kat-focus-ring-offset-shadow, $kat-focus-ring;
  }
}

/* スクリーンリーダーのみミックスイン */
@mixin kat-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* クリアフィックスミックスイン */
@mixin kat-clearfix {
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}

/* フレックスセンターミックスイン */
@mixin kat-flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* アスペクト比ミックスイン */
@mixin kat-aspect-ratio($ratio: 1) {
  aspect-ratio: $ratio;
  
  @supports not (aspect-ratio: 1) {
    &::before {
      content: "";
      float: left;
      padding-top: calc(100% / #{$ratio});
    }
    
    &::after {
      content: "";
      display: table;
      clear: both;
    }
  }
}

/* 視覚的に非表示だがアクセシビリティに優れたミックスイン */
@mixin kat-visually-hidden {
  @include kat-sr-only;
}

/* テキストの切り捨てミックスイン */
@mixin kat-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 行のクランプミックスイン */
@mixin kat-line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ホバーとフォーカスステートミックスイン */
@mixin kat-hover {
  @media (hover: hover) {
    &:hover {
      @content;
    }
  }
}

/* スクロールバースタイルミックスイン */
@mixin kat-scrollbar {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: map.get($kat-primary-colors, 100);
    border-radius: $kat-radius-base;
  }
  
  &::-webkit-scrollbar-thumb {
    background: map.get($kat-primary-colors, 300);
    border-radius: $kat-radius-base;
    
    &:hover {
      background: map.get($kat-primary-colors, 400);
    }
  }
  
  /* Firefox - スクロールバーのスタイル */
  scrollbar-width: thin;
  scrollbar-color: map.get($kat-primary-colors, 300) map.get($kat-primary-colors, 100);
}

/* シャドウミックスイン */
@mixin kat-elevation-1 {
  box-shadow: $kat-shadow-sm;
}

@mixin kat-elevation-2 {
  box-shadow: $kat-shadow;
}

@mixin kat-elevation-3 {
  box-shadow: $kat-shadow-md;
}

@mixin kat-elevation-4 {
  box-shadow: $kat-shadow-lg;
}

@mixin kat-elevation-5 {
  box-shadow: $kat-shadow-xl;
}

/* ボーダーラウンドミックスイン */
@mixin kat-border-radius-sm {
  border-radius: $kat-component-border-radius-sm;
}

@mixin kat-border-radius-md {
  border-radius: $kat-component-border-radius;
}

@mixin kat-border-radius-lg {
  border-radius: $kat-component-border-radius-lg;
}
